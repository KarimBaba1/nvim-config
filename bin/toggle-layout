#!/usr/bin/env bash

firefoxId=$(xdotool search --desktop 0 --onlyvisible --class "firefox")
termId=$(xdotool search --class "wezterm")

screen=$(xdotool getdisplaygeometry | tr ' ' 'x')

if xwininfo -id "$termId" -stats | grep geometry | grep -q "$screen"; then
  # is in fullscreen
  xdotool windowfocus "$termId" key super+f
  sleep 1
  xdotool windowfocus "$firefoxId" \
    key super+Left \
    windowfocus "$termId" \
    key super+Right
else
  xdotool windowfocus "$firefoxId" key super+Up
  xdotool windowfocus "$termId" key super+Up
  xdotool key super+f
fi
